# Haskellのif式でなぜ`else`が必要なのか

Haskellでは`if`文ではなく、**`if`式**が用いられます。  
重要なポイントとして、Haskellの`if`式には **必ず`else`** が必要です。本記事ではその理由を解説します。

---

## 1. Haskellのifは式（Expression）

多くの命令型言語（C, Java, Pythonなど）では、`if`は **文（Statement）** として使われます。

```python
x = 5
if x > 0:
    print("positive")
# else は必須ではない
````

しかし Haskellでは、`if`は **値を返す式** です：

```haskell
if x > 0 then "positive" else "non-positive"
```

* `if ... then ... else ...` は **必ず値を返す**
* 式の結果が必要なため、`else`がないと型が決まらずコンパイルエラーになります

---

## 2. 型安全性と全称性（Totality）

Haskellでは、関数や式は**全ての入力に対して値を返す**ことが求められます（total function）。

```haskell
f x = if x > 0 then "positive"
```

* このコードでは、`x <= 0` の場合に返す値がありません
* 結果として **コンパイルエラー** になります

全ての分岐で値が返ることにより、型安全性と関数合成の整合性が保たれます。

---

## 3. 関数型言語としての設計思想

Haskellの設計思想では、すべての計算は **値として扱われる** ことが重要です。

```haskell
describe x = "Value is " ++ (if x > 0 then "positive" else "non-positive")
```

* `if`式自体が文字列の一部として利用可能
* 副作用に依存せず、すべての分岐で値が返ることが保証されます

---

## 4. まとめ

1. Haskellの`if`は**式（Expression）**であり、値を返す必要がある
2. `else`が必須なのは、全ての分岐で値を返すことを保証するため
3. これにより、型安全性と関数合成の整合性が保たれる
4. 関数型言語では、**計算は常に値として扱われる**という設計思想の現れ

---

### 補足

* 命令型言語では「何もしない分岐」が許されますが、Haskellでは **全ての分岐で何かの値を返す必要** があります
* これは Haskell の型システムと純粋関数型プログラミングの特徴です

